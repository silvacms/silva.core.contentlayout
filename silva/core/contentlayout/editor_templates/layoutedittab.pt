<tal:rep replace="structure string:<script type='text/javascript'>" />
var objurl = '<span tal:replace="python:context.get_editable().absolute_url()" />';
var containerurl = '<span tal:replace="python:context.get_container().absolute_url() + '/'" />';
<tal:rep replace="structure string:</script>" />

<div id="content-layout" class="bethel-skin yui-skin-sam">

<!-- switch-template-select  needs to be up here so IE will render it correctly -->
<div id="switch-template-select">

 <div class="bd">
  <div id="select-template">
   <form name="templateSelect">
    <br />The current template is: <b tal:content="layout_template/name" /><br />
    <ul>
     <li tal:repeat="template templates"
         class="yuimenuitem">
      <input type="radio" align="left" name="Select_Template" tal:attributes="id python:'TemplateSelect' + str(repeat['template'].index); value python:template[0]" />
      <label tal:attributes="for python:'TemplateSelect' + str(repeat['template'].index)">
       <span tal:attributes="class python:'icon %s-icon'%template[0].replace('.','')">&nbsp;</span>
       <a class="yuimenuitemlabel"
          tal:attributes="value python:template[0]">
        <span class="template-name"
              tal:content="python:template[1].get_name()"/>
       </a>
      </label>
     </li>
    </ul>
   </form>
  </div>
</div>
</div> <!-- Close div Switch Template Select -->

<div id="content-layout-template">
 <div class="hd">
  <div id="infopanel">
   <div class="hd"></div>
   <div class="bd">
    <div class="infopanel-module" id="infopanel-layoutsettings">
     <div class="infopanel-module" id="infopanel-previewmode">
      <input type="button" id="previewmode" name="previewmode" value="" />
     </div>
     <div id="switch-template-cont" tal:condition="templates">
      <input type="button" id="switch-template-button"
             name="switch-template-button" value=""/>
     </div>
    </div>
   </div>
  </div>
 </div><!-- end clt head  -->
 
 <!-- this CSS width is required for IE -->
 <div class="bd" style="width: 100%">
  <iframe id="editor-frame" name="editor-frame" class="infopanel-collapsed" width="100%" height="800" 
   tal:define="parent context/aq_inner/aq_parent"
   tal:attributes="src string:${parent/absolute_url}/++layouteditor++"></iframe>

  <div id="add-part-menu" class="yuimenu">
   <div class="bd" tal:define="sources view/get_external_source_list">
    <h6 class="commonTitle">Common</h6>
    <ul class="hastitle">
     <li tal:repeat="source python:[ s for s in sources if s[0] < 10 ]"
         tal:attributes="class python:'yuimenuitem%s'%(repeat['source'].index==0 and ' first-of-type' or '')">
      <a class="yuimenuitemlabel"
         tal:attributes="value python:source[2]"><img tal:replace="structure python:view.render_external_source_icon(source[3])" /><span tal:content="python:source[1]" />
       <em class="helptext" tal:content="python:source[3].get_description()" />
      </a>
     </li>
    </ul>
    <h6 class="moreItemsTitle collapsed">More...</h6>
    <ul class="hastitle collapsed">
     <li tal:repeat="source python:[ s for s in sources if s[0]>=10 ]"
         tal:attributes="class python:'yuimenuitem%s'%(repeat['source'].index==0 and ' first-of-type' or '')">
      <a class="yuimenuitemlabel"
         tal:attributes="value python:source[2]"><img tal:replace="structure python:view.render_external_source_icon(source[3])" /><span tal:content="python:source[1]" />
       <em class="helptext" tal:content="python:source[3].get_description()" />
      </a>
     </li>
    </ul>
   </div>
  </div>

  </div><!-- end body of content-layout-template -->

 <div class="ft"></div>

</div><!-- end of "content-layout-template" div -->

 <div id="part-editor-panel"></div>
 <div id="part-add-panel"></div>
 <div id="confirm-part-delete"></div>
 <div id="confirm-template-switch"></div>

</div><!-- end of "content-layout" div -->